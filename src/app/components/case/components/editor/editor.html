<!--
  ~ Copyright (c) 2017.
  ~
  ~ @author Alexander Zagovorichev <zagovorichev@gmail.com>
  -->

<ng2-slim-loading-bar #loadingBarCaseEditor></ng2-slim-loading-bar>

<div *ngIf="accident">
    <h1>{{ accident.id ? 'Editing case #' + accident.id : 'Creating new case' }}</h1>
    <div class="row">
        <div class="col-lg-9">
            <form class="edit-form-container form" (ngSubmit)="onSubmit()" #accidentForm="ngForm">

                <div class="form-group">
                    <div class="row">
                        <div class="col-sm-6">
                            <label class="label">{{ 'Accident Type' | translate }}</label>
                            <select-accident-type
                                    [selectedTypeId]="accident.accident_type_id"
                                    (loading)="onLoading($event)"
                                    (loaded)="onLoaded($event)"
                            ></select-accident-type>
                        </div>
                        <div class="col-sm-6">
                            <label class="label">{{ 'Applied Time' | translate }}</label>
                            <p-calendar
                                    name="appliedTime"
                                    [(ngModel)]="appliedTime"
                                    [maxDate]="maxDate"
                                    [showTime]="true"
                                    [hourFormat]="24"
                                    [required]="true"
                            ></p-calendar>
                        </div>
                    </div>
                </div>

                <div class="form-group">

                    <div class="row">
                        <div class="col-sm-12">
                            <label class="label">Services</label>
                            <services-selector
                                    [caseId]="accident.id"
                                    (loading)="onLoading($event)"
                                    (loaded)="onLoaded($event)"
                            ></services-selector>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn btn-success btn-lg" [disabled]="!accidentForm.form.valid">Save</button>
            </form>
        </div>
    </div>
</div>
