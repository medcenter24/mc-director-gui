<!--
  ~ Copyright (c) 2017.
  ~
  ~ @author Alexander Zagovorichev <zagovorichev@gmail.com>
  -->

<div class="widgets">
  <div class="row offset-bottom20">
    <div class="col-sm-12">
      <p-toolbar class="toolbar-widget">
        <div class="ui-toolbar-group-left">
          <button pButton type="button" label="{{ 'Create new case' | translate }}" icon="fa-plus" (click)="handleCreate()"></button>
          <i class="fa fa-bars"></i>
          <button pButton type="button" label="{{ 'Import' | translate }}" icon="fa-upload" (click)="openImporter()"></button>
          <button pButton type="button" label="{{ 'Export' | translate }}" icon="fa-download" (click)="exportCases()"></button>
        </div>
        <div class="ui-toolbar-group-right">
          <i class="fa fa-bars"></i>
          <!--button pButton type="button" icon="fa-search"></button-->
          <button pButton type="button" icon="fa-refresh" (click)="reloadDatatable({})"></button>
        </div>
      </p-toolbar>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <ba-card baCardClass="with-scroll">
        <p-paginator
                *ngIf="pagination.show"
                [rows]="pagination.rows"
                [totalRecords]="pagination.total"
                [rowsPerPageOptions]="pagination.rowsPerPage"
                (onPageChange)="handlePageChanged($event)"
        ></p-paginator>
        <ng2-smart-table
                *ngIf="settings.columns"
                [settings]="settings"
                [source]="source"
                (userRowSelect)="handleEdit($event)"
        ></ng2-smart-table>
      </ba-card>
    </div>
  </div>
</div>

<nga-importer #importer
  [url]="service.getImportUrl()"
></nga-importer>